<!-- (done) - display globe -->
<!-- (done) - create markers  -->
<!-- (done) - make buttons  -->
<!-- todo - why doesn't the panTo(coords) function work? What am I missing? see it working here http://examples.webglearth.com/#apidemo -->
<!-- todo - the "random drone" button should use the panTo(coords) function and go to a random Drone (right now there are 4 but there will be many)-->
<!-- todo - make it work better on mobile (right now you can spin it once but if you zoom you can't spin it again) -->
<!-- todo - try to animate it so it spins? this might look bad so don't invest too much in it http://examples.webglearth.com/#animation -->


<!DOCTYPE HTML>
<html>

<head>
  <script src="http://www.webglearth.com/v2/api.js"></script>
  <script>
    var earth;
    function initialize() {
      var options = {
        atmosphere: true,
        center: [0, 0],
        zoom: 0
      };
      earth = new WE.map('earth_div', options);
      WE.tileLayer('http://tileserver.maptiler.com/nasa/{z}/{x}/{y}.jpg', {
        minZoom: 0,
        maxZoom: 5,
        attribution: 'NASA'
      }).addTo(earth);

      var marker = WE.marker([52.531677, 13.381777]).addTo(earth);
      marker.bindPopup("<b>Berlin</b><br>Drone<br /><span style='font-size:10px;color:#999'>...</span>", {
        maxWidth: 150,
        closeButton: true
      }).openPopup();

      var marker2 = WE.marker([30.058056, 31.228889]).addTo(earth);
      marker2.bindPopup("<b>Cairo</b><br>Drone", {
        maxWidth: 120,
        closeButton: true
      });

      var marker3 = WE.marker([43.6532, -79.3832]).addTo(earth);
      marker3.bindPopup("<b>Toronto</b><br>Drone<br /><span style='font-size:10px;color:#999'>...</span>", {
        maxWidth: 120,
        closeButton: true
      });

      var marker4 = WE.marker([-34.603722, -58.381592]).addTo(earth);
      marker4.bindPopup("<b>Buenos Aires</b><br>Drone<br /><span style='font-size:10px;color:#999'>...</span>", {
        maxWidth: 120,
        closeButton: true
      });

      var markerCustom = WE.marker([50, -9], '/img/logo-webglearth-white-100.png', 100, 24).addTo(earth);

      // Start a simple rotation animation
       var before = null;
       requestAnimationFrame(function animate(now) {
           var c = earth.getPosition();
           var elapsed = before? now - before: 0;
           before = now;
           earth.setCenter([c[0], c[1] + 0.1*(elapsed/30)]);
           requestAnimationFrame(animate);
       });

      function randomDrone(){
        // write this at some point. we want this button to bring us to one of the places on the map
      }

    }
    function panTo(coords) {
       earth.panTo(coords); //why doesn't this work? I've obviously missed something.
     }
  </script>
  <style>
    html,
    body {
      padding: 0;
      margin: 0;
    }

    #earth_div {
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: #000;
      position: absolute !important;
    }

    #buttons {
      position: absolute;
      top: 10px;
      left: 10px;
    }
  </style>
  <title>WebGL Earth API: Satellite</title>
</head>

<body onload="initialize()">
  <div id="earth_div"></div>

  <!-- <div id="map"></div> -->
  <!-- <div id="coords"></div> -->
  <div id="buttons">
    <input type="button" value="Fly to Random Drone" onclick="randomDrone()"><br />
    <input type="button" id="berlin" value="Fly to Berlin" onclick="panTo([52.531677, 13.381777]);"><br />
  </div>
</body>

</html>
